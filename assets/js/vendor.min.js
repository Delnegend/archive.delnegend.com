(()=>{var a={speed:"normal",randomString(c=20){let a="";const b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let d=0;d<c;d++)a+=b.charAt(Math.floor(Math.random()*b.length));return"_"+a+btoa((new Date).getTime()).replace(/=/g,"")},string2clip(d,b){$(b).attr("data-clipboard-text",d);const c=this.randomString();b.classList.add(c);const e=new ClipboardJS("."+c);e.on("success",function(b){a.msgBox("Copied to clipboard")}),setTimeout(()=>b.classList.remove(c),0)},msgBox(b="Th\xF4ng b\xE1o!",c=1e3){const a=this.randomString();$(".alert-container")[0]||$("body").append(`<div class="alert-container"><div class="inneralert-container"></div></div>`),$(".inneralert-container").append(`<div class="alert standard-btn" id=${a} role=alert style=display:none>
        <div class=btn-inner>${b}</div>
      </div>`),$("#"+a).slideDown(this.speed),setTimeout(()=>{$(`#${a}`).slideUp(this.speed,()=>$(`#${a}`).remove())},c)},toggleElem(b){const a=$(b).attr("toggle-target"),c=b.checked;$(a)[0].style.overflow!=="hidden"&&($(a)[0].style.overflow="hidden"),$(a).attr("prevDisplay")!="block"&&($(a)[0].style.display="block",$(a).attr("prevDisplay","block"),$(a).hide()),c?$(a).slideDown(this.speed):c||$(a).slideUp(this.speed),!this.isFirefox()&&this.isFromUserAction&&this.saveCheckboxStateToLocalStorage(b)},isFromUserAction:!1,async dlGridView(b,a){if(!a)return new Error("Invalid element");if(a.classList.add("direct-link-grid-view"),data=await this.getYAML(b)||[],!data.length)return new Error("This",data,"is invalid or empty");for(const b of data){const i=b.episode,j=b.poster||"/img/blank.jpg";let f="",g="";b.webp&&(f=`<source srcset="${b.webp}" type="image/webp">`);let h=`<div class="title">${b.title}</div>`;i&&(h=`<div class="title">${i}. ${b.title}</div>`);let d=b.duration,c=b.size,e="";d||(d=""),c||(c=""),d&&!c&&(e=`<div>${d}</div>`),c&&!d&&(e=`<div>${c}</div>`),d&&c&&(e=`<div>${d}&nbsp;\u2022&nbsp;${c}</div>`),b.summary&&(g=`<div class="custom-hr"></div><p class="epSummary">${b.summary}</p>`),$(a).append(`
      <div class="an-episode">
        <div class="episode-image" onclick='dngndFunc.string2clip("${b.url}",this)'>
          <picture>
            ${f}
            <source srcset="${j}" type="image/jpg">
            <img src="${j}">
          </picture>
          <span><i class="fad fa-copy"></i></span>
        </div>
        ${h}
        ${e}
        ${g}
      </div>
      `)}},async dlTableView(g,d,h="normal"){if(!d)return new Error("Invalid element");const b=await this.getYAML(g)||[];if(!b.length)return new Error("Invalid",b);const a=[];let f="";for(const a of b)a.subs&&(f=`<th>Subtitle</th>`);a.push(`
      <div class=table>
        <table>
            <thead><tr>
                <th>Episode</th>
                <th>Title</th>
                <th>Server</th>
                ${f}
            </tr></thead>
          <tbody>
    `);const c=(c,d,b,e)=>{c=c.toLowerCase();const a=[];return c=="direct"?(a.push(`<span class="standard-btn interactable" onclick="dngndFunc.string2clip(\`${e}\`,this)">`),b?b&&a.push(`
            <div class="btn-inner-slide">${d}</div>
            <div class="btn-inner-alter">${b}</div>
          `):a.push(`<span class="btn-inner">${d}</span>`),a.push(`</span>`)):c=="normal"&&(b?b&&a.push(`
          <div class="standard-btn interactable">
            <a href="${e}" target="_blank" slide="1" rel="noreferrer noopener">
              <div class="btn-inner-slide">${d}</div>
              <div class="btn-inner-alter">${b}</div>
            </a>
          </div>
      `):a.push(`
          <a href="${e}" target="_blank" rel="noopener noreferrer">
            <div class="standard-btn interactable">
              <div class="btn-inner">${d}</div>
            </div>
          </a>
        `)),a.join("")};for(const d of b){a.push(`
        <tr>
          <th>${d.episode}</th>
          <td>${d.title}</td>
          <th>
      `);for(const b of d.urls)e=b.split("__"),e.length==3&&a.push(c(e[0],e[1],!1,e[2])),e.length==4&&a.push(c(e[0],e[1],e[2],e[3]));if(d.subs){a.push(`</th><th>`);for(const b of d.subs)language=b.split("__"),a.push(`
            <a class="flag" href="${language[1]}" download="[${document.querySelector("title").innerHTML.replace(" \u2013 Delnegend","")}] ${language[1].replace("/","_")}">
              <img class="flag interactable" src="/flag/${language[0].toLowerCase()}.svg">
            </a>`);a.push(`</th></tr>`)}else d.subs||a.push(`</th></tr>`)}a.push(`</tbody></table></div>`),d.append(this.string2Node(a.join("").replace("/[	\n\rs]+/g","")))},saveCheckboxStateToLocalStorage(c){const d=JSON.parse(localStorage.getItem("checkbox_check")||"{}"),e=window.location.pathname.replace(/\//g,"_"),a=d[e]||[],b=$(c).fullSelector();this.removeElemFromArr(a,""),c.checked&&!a.includes(b)?a.push(b):!c.checked&&a.includes(b)&&this.removeElemFromArr(a,b),d[e]=a,localStorage.setItem("checkbox_check",JSON.stringify(d))},removeElemFromArr(a,c){const b=a.indexOf(c);b>-1&&a.splice(b,1)},objLength(a){let b=0;for(const c in a)a.hasOwnProperty(c)&&b++;return b},isFirefox(){if(typeof InstallTrigger!="undefined")return!0;if(typeof InstallTrigger=="undefined")return!1},string2Node(a){const b=document.createElement("template");return a=a.trim(),b.innerHTML=a,b.content.firstChild},tweakTable(a){a.setAttribute("tweaked",""),$(a.querySelector("table")).sticky({top:"thead tr"}),$(a).floatingScroll()},getYAML(a){return new Promise(c=>{let b=new XMLHttpRequest;b.open("GET",a,!0),b.onreadystatechange=function(){this.readyState===4&&(this.status>=200&&this.status<400?c(YAML.parse(this.responseText)):c(void 0))},b.send(),b=null})}};$(document).ready(async()=>{$(".table").each((c,b)=>!b.getAttribute("tweaked")&&a.tweakTable(b)),(()=>{const b="dl-grid-view",c="dl-table-view",d=b=>!b.querySelector(".table").getAttribute("tweaked")&&a.tweakTable(b);$(b).length&&$(b).each((c,b)=>a.dlGridView(b.getAttribute("data"),b)),$(c).length&&$(c).each(async(c,b)=>{await a.dlTableView(b.getAttribute("data"),b),d(b)})})(),a.isFirefox()&&$(".toggleElemBtn>input").each((c,a)=>{const b=a.checked;b&&(a.click(),a.click())}),$(".menu .close-menu").on("click",()=>{$(".menu").addClass("hidden"),setTimeout(()=>{$(".menu").hide()},500)}),$(".navbarContainer .open-menu").on("click",()=>{$(".menu").show(),$(".menu").removeClass("hidden")})}),window.addEventListener("load",()=>{if(!a.isFirefox()){const c=JSON.parse(localStorage.getItem("checkbox_check"));let b;c&&(b=c[window.location.pathname.replace(/\//g,"_")]||[],b.length&&b.forEach(a=>$(a).click())),a.isFromUserAction=!0}}),(()=>{const a=/constructor/i.test(window.HTMLElement)||function(a){return a.toString()==="[object SafariRemoteNotification]"}(!window.safari||typeof safari!="undefined"&&safari.pushNotification);if(!!document.documentMode||a){const a=new webpHero.WebpMachine;a.polyfillDocument()}})(),$.fn.fullSelector=function(){const a=this.parents().addBack(),b=a.get().map(a=>{const c=$(a),d=a.id?"#"+a.id:"",e=a.classList.length?a.classList.toString().split(" ").map(a=>"."+a).join(""):"",b=a.nodeName.toLowerCase(),f=c.siblings(b).length?":nth-child("+(c.index()+1)+")":"";return b==="html"||b==="body"?b:b+f+d+e}).join(" > ");return b}})()